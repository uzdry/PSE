\documentclass[qualitaetssicherung.tex]{subfiles}

\begin{document}

\section{Aggregierte Funktionen}

	\subsection*{Allgemeine Schwierigkeiten} 
		Von jedem Topic kann der Durchschnittswert mit der Klasse \label{Class: AverageComputation} berechnet werden. Der Durchschnittswert wird zeitgewichtet berechnet. Zu Testzwecken können Dummy-Werte durch synchrone oder asynchrone Methodenaufrufe auf dem Server-Side Bus verteilt werden. Allerdings ist im Allgemeinen nicht möglich, dem Durchschnittswert vorherzusehen, weil die Laufzeiten der Funktionen nicht bekannt sind.


	\subsection{Abweichungen beim Durchschnitt} \label{DAVG}
		\begin{itemize}
			\item
			Symptom: Als Durchschnitt der beiden Werte 22 und 24 wird 23.0000848 berechnet.
			\item
			Grund: Der Durchschnitt wird zeitgewichtet berechnet und die Laufzeit der Funktion ist nicht vorhersehbar.
			\item
			Behebung: Fehler tritt auf schnellen Maschinen nicht auf (Referenz: i7 4790)

		\end{itemize}

	\subsection{Abweichungen bei der Distanz} \label{DDIST}
		\begin{itemize}
			\item
			Symptom: Der von der aggregrierten Funktion \code{Distance()} berechnete Distanzwert weicht leicht von dem Produkt der von \code{AverageComputation(Topic.SPEED)} errechneten Durschnittsgeschwindigkeit und dem explizit gegebenen $\Delta t$ ab.
			\item
			Grund: Durchschnitt und Distanz werden unabhängig voneinander zeitgewichtet berechnet und die Laufzeit der Funktion ist nicht vorhersehbar. Der Durchschnitt ist um ein Zeitintervall verschoben.
			\item
			Behebung: Nicht nötig die abweichung ist relativ gering. Mit einem 2.4 Ghz Core2Duo Prozessor von 2009 etwa 

		\end{itemize}

	\subsection{Intervalle beim Time-Weighted-Average} \label{TWA}
		\begin{itemize}
			\item
			Symptom: Bei der Berechnung des Durchschnitts wird der eintreffende Wert 
			\item
			Grund: Man kann sich das Berechnen wie die Berechnung des Integrals des Wertes $v$ über die Zeit und anschließende Mittelung vorstellen. Die Berechnnung erfolgt Diskret mit folgender Formel für n Werte $v_i$ gilt für den Durchschnitt.
			$$avg = \frac{1}{t_n - t_0} \sum_{i = 1}^{n} (t_i - t_{i-1}) * v_{i-1}$$ Wobei $t_i$ jeweils die aktuelle Systemzeit ist. Für die Berechnung im Programm wurde die Formel mit $v_i$ anstelle von $v_{i-1}$ verwendet.
			\item
			Behebung: Berechnung in der Methode \code{handleMessage(m: Message): void} der Klasse \code{AverageComputation} angepasst.

		\end{itemize}

	\subsection{Intervalle bei der Distanzmessung} \label{VGL}
		\begin{itemize}
			\item
			Symptom: Bei der Berechnung des Durchschnitts wird der gleiche Fehler gemacht wie in ~\ref{TWA} Die Berechnung der Distanz ist jedoch einfacher, da immmer nur die zurükgelegte Strecke zwischen dem letzen und dem aktuellen Aufruf auf den Wert aufaddiert wird. Die Strecke wird inkrementell berechnet.
			\item
			Grund: Die berechnung erfolgt linear interpoliert mit der Formel: $s=v\Delta t$. Beim $i$-ten Aufruf wird $s_{i} = s_{i-1} + v_i * (t_i - t_{i-1})$ berechnet. Die Zeitdiferrenz zwischen letzten und aktuellem Aufruf wird mit aktuellem Geschwindigkeitswert multipliziert.
			\item
			Behebung: Ähnlich wie in ~\ref{TWA} wird der Index angepasst, sodass beim $i$-ten Aufruf von \code{handleMessage(m: Message): void} $s_{i} = s_{i-1} + v_{i-1} * (t_i - t_{i-1})$ berechnet wird.

		\end{itemize}

	Durch Beheben des Fehlers ~\ref{TWA} bzw. ~\ref{VGL} konnte eine Verringerung der in ~\ref{DAVG} bzw. ~\ref{DDIST} Abweichung festgestellt werden.


\end{document}