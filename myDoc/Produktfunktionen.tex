\documentclass[pflichtenheft.tex]{subfiles}

\begin{document}

\chapter{Produktfunktionen}

\section{Allgemeine Funktionen}

\begin{enumerate}

	%GUI-Elemente einblenden:
	
	\item{\textbf{GUI-Instrumemte auswählen}}
	
	\begin{enumerate}
	\item{\textbf{Instrumente anzeigen:}} \\ Vorbedingung: Server läuft. Es sind Endgeräte mit ihm vebunden.\\ Auslösendes Ereignis: Der Nutzer wählt in den Einstellungen auf dem Endgerät ein Instrument aus.\\ Nachbedingung: Das Instrument wird auf dem Screen angezeigt und zeigt die aktuellen Daten an. Falls keine aktuellen Daten vorhanden sind, steht es in neutraler Position (0).
	\end{enumerate} 
	
	%Datenhaltung:
	
	\item{\textbf{Datenhaltung}}

	\begin{enumerate}
	
		\item{\textbf{Protokoll führen}} \\ Ziel: Es werden eingehende Daten gespeichert. \\ Vorbedingung: Server läuft. Bluetooth-Verbindung mit OBD2 Adapter ist hergestellt. \\ Auslösendes Ereignis: Von der Bluetooth-Schnittstelle treffen Daten ein. %%TODO: Check BT API Node.js server 
		Nachbedingung: Die Daten, die von der Bluetooth-Schnittstelle kommen, befinden sich in der Datenbank und kommen über das Netzwerk auf Endgeräten an.
		
		\item{\textbf{Vergangene Daten aufrufen}} \\ Ziel: Es werden Daten von vergangenen Zeitpunkten dargestellt. \\ Vorbedingung: Es wurde bereits eine Fahrt getätigt. Der Server läuft.\\ Auslösendes Ereignis: Der Nutzer fordert Daten aus der Vergangenheit an. \\ Nachbedingung: Die Daten werden auf dem Endgerät angezeigt.
	
		\item{\textbf{Maximale Kapazität einstellen}} \\ Ziel: Es soll eine neue maximale Kapazität der Datenbank gesetzt werden. \\ Vorbedingung: Der Server läuft. \\ Auslösendes Ereignis: Der Benutzer versucht, eine neue maximale Kapazität der Datenbank zu setzen. \\ Nachbedingung: Die neue gespeicherte maximale Kapazität der Datenbank ist der vom Nutzer eingegebene Wert.
		
		\item{\textbf{Daten automatisch löschen}} \\ Ziel: Um Überfüllung der Datenbank zu vermeiden werden Daten gelöscht. \\ Vorbedingung: Der Server läuft. \\ Auslösendes Ereignis: Die definierte maximale Kapazität der Datenbank ist erreicht. \\ Nachbedingung: Die Datenbank hat weniger Einträge als ihre maximale Kapazität. Die ältesten Einträge wurden gelöscht.
		
	\end{enumerate} 

	\item{\textbf{Remote Access erzeugen}} \\ Ziel: Der Benutzer kann die Software auf einem entfernten Endystem benutzen.\\ Vorbedingungen: Das System läuft und es kommen Daten über den OBD2-Adapter an. Das System hat eine Verbindung zum Internet. \\ Ablauf: Der Benutzer verbindet ein entferntes Endgerät über Eingabe einer URL im Browser mit dem Server.\\ Nachbedingung (Erfolg): Die Funktionen GUI-Konfiguration, Fahrinformation, Vergangene Daten, Karte und Einparkhilfe stehen auf dem Endsystem zur Verfügung. \\ Nachbedingung (Fehlschlag): Das Endsystem zeigt an, dass die Verbindung zum Server fehlgeschlagen ist.

	\item{\textbf{Fahrinformationen darstellen}} \\ Ziel: Darstellung der aktuellen Sensorwerte auf dem Endgerät \\ Vorbedingung: Das System läuft und es werden durchgängig neue Daten zur Datenbank hinzugefügt. Es existiert eine Verbindung mit mindestens einem Endgerät. Dieses Gerät besitzt eine Konfiguration des GUI. \\ Auslösendes Ereignis: Das Endgerät empfängt Sensordaten vom Server.\\ Nachbedingung: Das Endgerät zeigt diese Daten entsprechend der aktuellen GUI-Konfiguration an. Die Datenbank bleibt unverändert.

	\item{\textbf{Aggregierte Funktionen berechnen}} \\ Ziel: Berechnung der aggregierten Funktionen. \\ Vorbedingung: FA/Fahrinformationen funktioniert. Gewünschte aggregierte Funktionen sind angegeben. \\ Auslösendes Ereignis: Es kommen zur Berechnung der aggregierten Funktionen benötigte Sensorwerte am Server an. \\ Ablauf: Die Software berechnet die gewünschten aggregierten Funktionen. Sie schickt die Informationen an das Endgerät. Das Endgerät zeigt die berechneten Daten entsprechend der GUI-Konfiguration an. \\ Nachbedingungen: Das Endgerät zeigt die Daten im UI an.  \\ Aggregierte Funktionen sind:
		\begin{itemize}
			\item Restkilometer: Die Software berechnet eine Schätzung der Restkilometer abhängig vom aktuellen Treibstoffverbrauch.
		\end{itemize}

	\item{\textbf{Smartphone Utilization}}\\ Vorbedingung: Es existiert eine Verbindung mit einem Endgerät. Die Sensoren des Endgeräts sind aktiviert.\\ Auslösendes Ereignis: Auf dem Endgerät sind neue Sensordaten verfügbar. \\ Nachbedingung (Erfolg): Die Sensordaten vom Endgerät werden auf den Server übertragen. Die Daten werden auf dem Server gespeichert und von Software bearbeitet.\\  Nachbedingung (Fehlschlag): Die Sensoraten werden nicht übertragen. \\

	\item{\textbf{Ultraschallsensoren visualisieren}} \\ Ziel: Die Distanzwerte von den Ultraschallsensoren visualisieren. \\ Vorbedingung: Eine Kamera ist vorhanden und eingeschaltet. Der Server läuft. \\ Auslösendes Ereignis: Der Fahrer schaltet in den Rückwärtsgang. /*GUI-DX01: Knopf anzeigen, wenn man drauf drückt, dann werden die Messwerte angezeigt. //*NA-DX01: Reaktionszeit? 100ms?/. Alternativ: Der Benutzer möchte die Messwerte anzeigen.\\ Nachbedingung (Erfolg): Die tatsächliche Messwerte werden ausreichend schnell /*NA-DX01/ angezeigt. \\ Nachbedingung (Fehlschlag): Es werden keine oder falsche Messwerte angezeigt.

	\item{\textbf{Einparkhilfe}}
	
	\begin{enumerate}
	
	\item{\textbf{Einparken vereinfachen}} \\ Ziel: Vereinfachen des rückwärts beziehungsweise rückwärts-Seitwärts Einparkens durch Anzeige einer Rückfahrkamera und Einblenden einer Visualisierung der möglichen Fahrstrecke. \\ Vorbedingung: Server läuft. \\ Auslösendes Ereignis:  Der Fahrer schaltet ins Rückwärtsgang. Alternativ: Der Benutzer fordert das System auf die Kamera einzuschalten. \\ Ablauf:
	\begin{itemize}
			\item Der Fahrer dreht das Lenkrad.
			\item Die Fahrbahn auf dem Bildschirm wird aktualisiert.
			\item Der Fahrer versucht einzuparken und fährt rückwärts.
			\item Das Kamerabild wird regelmäßig aktualisiert.
	\end{itemize}
Nachbedingung (Erfolg): Das Bild der Rückfahrkamera wird angezeigt und regelmäßig aktualisiert /*NA-DX20: Aktualisierungszeit? 100ms?/. Die Visualisierung der Fahrbahn wird korrekt dargestellt und regelmäßig aktualisiert /*NA-DX21: Aktualisierungszeit? 100ms?/. \\ Nachbedingung (Fehlschlag): Das Bild der Rückfahrkamera wird nicht angezeigt, ist fehlerbehaftet oder wird nicht aktualisiert /*NA-DX20/. Die Visualisierung der Fahrbahn wird nicht dargestellt, ist nicht korrekt oder wird nicht aktualisiert /*NA-DX21/. 

	\item{\textbf{Einparkhilfe beenden}} \\ Ziel: Das System soll die Darstellung der Einparkshilfe automatisch vom Bildschirm entfernen, wenn die Daten nicht mehr sinnvoll dargestellt werden können. \\ Vorbedingung: Auf dem Bildschirm wird die Einparkhilfe angezeigt. \\ Nachbedingung (Erfolg): Die Einparkhilfe verschwindet von dem Bildschirm. \\ Auslösendes Ereignis: Der Benutzer fordert das System auf, die Einparkhilfe zu beenden. Alternativ: Das Fahrzeug fährt vorwärts mit einer Geschwindigkeit von mehr als /*NA-DX40: z.B. 20 km/h./ \\  Nachbedingung (Fehlschlag): Die Einparkhilfe verschwindet nicht von dem Bildschirm.
	
	\end{enumerate}
	
	\item{\textbf{Karte und POI}
	
	\begin{enumerate}
	
	\item{\textbf{Karte anzeigen}} \\Vorbedingung: Der Fahrer fährt gerade mit dem Auto. Ein Lokalisierungssignal ist vorhanden. \\ Auslösendes Ereignis: Der Benutzer fordert die Karte an. \\Nachbedingung: Eine Karte der Umgebung wird angezeigt.
  
  	\item {\textbf{Tankstellen auflisten}} \\ Vorbedingung: Das Lokalisierungssingnal ist vorhanden. \\ Auslösendes Ereignis: Der Fahrer fordert die Tankstellen in der Nähe an. Alternativ: Der Tankfüllstand ist kritisch und der Benutzer öffnet die Karte.\\ Nachbedingung: Eine List von Tankstellen in der Nähe mit jeweiligem Preis bzw. deren Entfernung und eine Visualisierung auf der Karte werden angezeigt.
  	
  	\item {\textbf{Route zur gewünschten Tankstelle berechnen}} \\Vorbedingung: Die Tankstelle in der Nähe sind angezeigt. Das
  Lokalisierungssignal ist vorhanden. \\ Auslösendes Ereignis: Der Benutzer wählt eine Tankstelle aus. \\Nachbedingung: Die Route zu der gewünschten Tankstelle wird berechnet und auf der Karte angezeigt.
  
	\item{\textbf{Werkstätten anzeigen}} \\ Vorbedingung: Eine oder mehrere Warnlampen des Autos leuchtet. \\ Auslösendes Ereignis: Der Nutzer öffnet die Karte. \\ Nachbedingung: Die Karte zeigt Werkstätten in der Nähe an.

	\end{enumerate}

\end{enumerate}

%noch nicht verarbeitetes:

\subsection{\mkfa Statistiken} Der Benutzer kann sich Statistiken der gespeicherten Sensorwerte anzeigen lassen.

\subsection{\mkfa Erweiterbarkeit} Drittentwickler können Module für die Verarbeitung und Auswertung weiterer Sensordaren schreiben.

\subsubsection{\mkfaw Fahrer} Ein Nutzer, der mit dem Server verbunden ist, kann sich mit der Software auf seinem Endgerät als Fahrer identifizieren (/FA0070/, /FA1020W/).
\end{document}