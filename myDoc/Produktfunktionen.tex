\documentclass[pflichtenheft.tex]{subfiles}

\begin{document}

\chapter{Produktfunktionen}

\subsection{Allgemeine Funktionen}

\begin{enumerate}
	
	\item{GUI Instrumemte auswählen} /

	\item{Instrumente anzeigen} Vorbedingung Server läuft. Es sind Endgeräte mit ihm vebunden. Auslösendes Ereignis: Der Nutzer wählt in den Einstellungen auf dem Endgerät ein Instrument für eine Größe aus. Nachbedingung: Das Instrument wird auf dem Screen angezeigt und liefert die aktuellen Daten. Falls keine aktuellen Daten vorhanden sind, steht es in neutraler Position (0).



	\item{Datenhaltung} Die definierte maximale Kapazität der Datenbank ist erreicht. Die ältesten Daten werden nach erreichen der maximalen Kapazität der Datenbank gelöscht.
	Nachbedingung: Datenbank hat weniger Einträge als ihre maximale Kapazität. Die ältesten Einträge wurden gelöscht.

	\begin{enumerate}
		\item{Protokoll führen} Vorbedingung: Server läuft. BT Verbindung mit OBD2 Adapter ist hergestellt.
		\\Auslösendes Ereignis: Ereignis von Bluetooth Schnittstelle über eintreffendes Ereignis. %%TODO: Check BT API Node.js server 
		\\Nachbedingung: Die Daten, die von der BT Schnittstelle kommen, befinden sich in der Datenbank und kommen über das Netzwerk auf Endgeräten an.
		\item{Vergangene Daten aufrufen} Vorbedingung: Es wurde bereits eine Fahrt getätigt. Der Server läuft. Auslösendes Ereignis: Der Nutzer vordert ein Anzeigeelemt für Daten über die Zeit an. Nachbedingung: 
	\end{enumerate} 
	\begin{enumerate}
		\item Der Nutzer stellt maximalen Wert einstellen.
	\end{enumerate}

	\item{Remote Access}
		Ziel: Der Benutzer kann die Software auf einem entfernten Endystem benutzen.

		Vorbedingungen: Das System läuft und es kommen Daten über den OBD2-Adapter an. Das System hat eine Verbindung zum Internet.

		Ablauf: Der Benutzer verbindet ein entferntes Endgerät über Eingabe einer URL im Browser mit dem Server.

		Nachbedingung (Erfolg): Die Funktionen GUI-Konfiguration, Fahrinformation, Vergangene Daten, Karte und Einparkhilfe stehen auf dem Endsystem zur Verfügung.

		Nachbedingung (Fehlschlag): Das Endsystem zeigt an, dass die Verbindung zum Server fehlgeschlagen ist.

	\item{Fahrinformationen}
	\begin{enumerate}
		\item Vorbedingung: Das System läuft und es werden durchgängig neue Daten zur Datenbank hinzugefügt.\\ Es existiert eine Verbindung mit mindestens einem Endgerät.\\ Dieses Gerät besitzt eine Konfiguration des GUI.
		\item 1. Das Endgerät empfängt die Daten der Datenbank.\\
		2. Es zeigt diese Daten entsprechend der aktuellen GUI-Konfiguration an.
		\item Nachbedingung: Die Datenbank bleibt unverändert.
	\end{enumerate}

	\item{Boardcomputer} 
	\begin{enumerate} 
		\item Vorbedingung: FA/Fahrinformationen funktioniert. Gewünschte aggregierte Funktionen angegeben.
		\item 1. Die Software berechnet die gewünschten aggregierten Funktionen.\\
		2. Sie schickt die Informationen an das Endgerät.\\
		3. Das Endgerät zeigt die berechneten Daten entsprechend der GUI-Konfiguration an.
		\begin{enumerate}
			\item Restkilometer: Als weitere aggregierte Funktion berechnet die Software eine Schätzung der Restkilometer abhängig vom aktuellen Treibstoffverbrauch.
		\end{enumerate}
		\item Nachbedingung: Die Datenbank ist unverändert.
	\end{enumerate}

	\item{Smartphone UtilizationW}\\ Vorbedingung: Es existiert eine Verbindung mit einem Endgerät. Die Sensoren des Endgeräts sind aktiviert. \\ \\
		Nachbedingung (Erfolg): Die Sensordaten vom Endgerät werden nach Pi übertragen. Die Daten werden auf dem Server gespeichert und von Software bearbeitet. \\ \\
		Nachbedingung (Fehlschlag): Daten werden nicht übertragen. \\ \\
		Auslöndendes Ereignis: Es wird eine Request-Anfrage vom Server nach Endgerät gesendet.

\end{enumerate}

\subsection{\mkfa Protokoll} Der Nutzer soll Daten aus der Vergangenheit zu jeder Zeit abrufen können.

\subsection{\mkfa Statistiken} Der Benutzer kann sich Statistiken der gespeicherten Sensorwerte anzeigen lassen.

\subsection{\mkfa Erweiterbarkeit} Drittentwickler können Module für die Verarbeitung und Auswertung weiterer Sensordaren schreiben.

\subsection{\mkfa RemoteAcces} Falls Netzwerkverbindung besteht, können entfernte Nutzer die Sensordaten einsehen.

\subsection{\mkfa Anzeigeelemente} Der Nutzer kann Anzeigeelemente für jeden der Sensorwerte ein- und ausblenden.

\subsection{Automotive Kontext}

\subsection{\mkfa Fahrinformation} Der Benutzer bekommt Fahrinformation (Glossar) angezeigt.

\subsection{\mkfa Boardcomputer} Die Software zeigt berechnet anhand der Sensorwerte aggregierte Funktionen. Wie Durchschnittsverbrauch.

\subsubsection{\mkfa Restkilometer} Die Software zeigt die verfügbaren Restkilometer bis zur nächsten Tankfüllung an. Diese werden aufgrungd des Fahrverhaltens berechnet.

\subsection{\mkfa Einparkhile} Dem Fahrer steht eine Einparkhilfe mit Augmented Reality Features zur Verfügung.

\subsection{\mkfa POI} Bei bestimmten Sensorwerten (Tank/Motor) kann der sich Nutzer die nächsten Tankstellen oder Werstätten einbleden.

\subsection{\mkfa Dateninput}
Wenn Daten über Bluetooth ankommen pflegt die Software diese Daten in eine Datenbank ein. 
\subsection{\mkfa Vergangene-Daten}
Wenn der Nutzer es wünscht zeigt die Software ihm die gespeicherten Daten an.
\subsection{\mkfa Zustandswarnungen}
Das System überwacht und reagiert auf kritische Sensorwerte und Warnungen.

\subsection{\mkfa Karte}
Der Benutzer kann sich vom System einen aktuellen Kartenausschnitt der Umgebung anzeigen lassen.
\subsubsection{\mkfa Werkstatt/Tankstellen}
Die Software kann auf dieser Karte auch Werkstätte, Tankstellen und Restaurants anzeigen.
\subsubsection{\mkfa Niedriger Tankfüllstand}
Bei niedrigem Tankfüllstand werden beim öffnen dieser Karte automatisch die Tankstellen in der Nähe angezeigt.
\subsubsection{\mkfa Weitere Probleme} % oder zu heißem Öl 
Bei weiteren Problemen wie einer Kontrollleuchte werden beim öffnen dieser Karte die Werkstätten in der Nähe angezeigt.
\subsection{\mkfa Einparkhilfe}
Beim rückwärts Einparken aktiviert die Software eine Rückfahrkamera und indiziert die aktuelle Fahrbahn.
\subsubsection{\mkfa Ultraschallsensoren}
Außerdem werden die Ultraschallsensordaten angezeigt.

\section{Wunsch}

\subsection{\mkfaw Smartphone Utilization} Die Software verwendet auch Sensordaten aus dem Endgerät.
\subsection{\mkfaw Personalisierung} Aggregierte Funktionen werden aufgrund der vorhandenen Daten des aktuell als Fahrer angemeldeten Nutzers bereitgestellt.

\subsubsection{\mkfaw Fahrer} Ein Nutzer, der mit dem Server verbunden ist, kann sich mit der Software auf seinem Endgerät als Fahrer identifizieren (/FA0070/, /FA1020W/).
\end{document}